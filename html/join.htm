<!DOCTYPE html>
<html lang="en">
<head>
  <title>CSGO Companion</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <script src="/js/jquery.min.js"></script>
  <script src="/js/popper.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="/css/main.css">
  <script type="text/javascript" src="/user.JSON"></script>
  
</head>
<body>

<div class="container-fluid jumbotron">
  <h1>CS GO Companion App</h1>
 </div>
 	<nav class="navbar navbar-expand-sm bg-light navbar-light sticky-top">
  		<ul class="navbar-nav">
    		<li class="nav-item active">
      			<a class="nav-link" href="#">Join</a>
    		</li>
    		<li class="nav-item">
      			<a class="nav-link" href="/html/host.htm">Host</a>
    		</li>
    		<li class="nav-item">
     			 <a class="nav-link" href="/html/edit.htm">Edit Profile</a>
    		</li>
  		</ul>
	</nav>
 <div class="container-fluid">
  <h5 id="welcome"></h5><br>
  <script type="text/javascript">
  	document.getElementById("welcome").innerHTML = "Hi! " + user.name + " @" + user.username;
  </script>
  <label for="tble">Select from the following running servers</label>
  <table class="table table-hover" id="tble">
  	<thead>
		<tr>
			<th>Server Name</th>
			<th>Map</th>
			<th>IP</th>
			<th>Admin</th>
			<th>Join</th>
		</tr>
	</thead>
	
	<tr>
		<td>Sample Server</td>
		<td>Dust 2</td>
		<td>127.0.0.1</td>
		<td>Kanav</td>
		<td><button class="btn btn-success" >Join</button></td>
	</tr>
	
</table>
</div>
<script type="text/javascript" src="/js/socket.io.js"></script>
<script>
        var socket = io();
        socket.on('avail' , function(msg) {
        alert('fuck');
        var response = JSON.parse(msg);
        var table = document.getElementById("tble");
        var row = table.insertRow(1);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        var cell4 = row.insertCell(3);
        var cell5 = row.insertCell(4);
        cell1.innerHTML = response.s_name;
        cell2.innerHTML = response.map;
        cell3.innerHTML = response.ip;
        cell4.innerHTML = response.admin;
        cell5.innerHTML = '<button class="btn btn-success">Join</button>';
      });
</script>

</body>
</html>